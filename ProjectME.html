<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Para Ti üíô</title>
<style>
  body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #f8c8dc, #e6a4b4);  
    color: #333;
    text-align: center;
    overflow-x: hidden;
  }

  .pantalla {
    display: none;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 2rem;
  }

  .pantalla.activa {
    display: flex;
  }

  h1, h2 {
    margin: 0.5rem 0;
  }

  button {
    margin-top: 1.5rem;
    padding: 0.8rem 1.5rem;
    font-size: 1rem;
    background: #f76c6c;
    border: none;
    border-radius: 12px;
    color: white;
    cursor: pointer;
    transition: transform 0.2s;
  }

  button:hover {
    transform: scale(1.05);
    background: #f84f4f;
  }

  /* Carrusel */
  .carrusel-seccion {
    display: none;
    flex-direction: column;
    align-items: center;
    width: 50%;
    max-width: 500px;
    margin: 2rem auto;
  }

  .carrusel-seccion.visible {
    display: flex;
  }

  .carrusel {
    position: relative;
    width: 100%;
    overflow: hidden;
    margin-top: 1rem;
  }

  .slide {
    display: none;
    flex-direction: column;
    align-items: center;
  }

  .slide.activa {
    display: flex;
  }

  .slide img {
    width: 300px;
    height: 300px;
    object-fit: cover;
    border-radius: 15px;
  }

  .dots {
    display: flex;
    justify-content: center;
    margin-top: 1rem;
    gap: 0.5rem;
  }

  .dot {
    width: 12px;
    height: 12px;
    background: rgba(255, 255, 255, 0.5);
    border-radius: 50%;
    cursor: pointer;
    transition: background 0.3s;
  }

  .dot.activa {
    background: #f76c6c;
  }

  /* Pantalla 3 */
  .mensaje-final {
    font-size: 1.3rem;
    max-width: 600px;
    position: relative;
    white-space: pre-line;
  }

  .corazon {
    position: absolute;
    font-size: 2rem;
    color: red;
    animation: flotar 5s infinite;
    opacity: 0.7;
  }

  .screen {
    position: relative;
    width: 100%;
    height: 100vh;
    overflow: hidden;
  }

  .background-video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 0;
  }

  #pantalla3 {
    position: relative;
    background-color: black;
    overflow: hidden;
  }

  #pantalla3 iframe {
    width: 300px;
    height: 300px;
    border-radius: 15px;
  }

  .contenido-video {
    position: relative;
    z-index: 1;
    color: white;
    text-align: center;
    padding: 20px;
  }

  .overlay {
    position: relative;
    background: rgba(0, 0, 0, 0.5);
    color: #fff;
    padding: 2rem;
    max-width: 600px;
    margin: auto;
    border-radius: 15px;
    text-align: center;
    top: 50%;
    transform: translateY(-50%);
  }

  .typewriter {
    border-right: 2px solid #fff;
    white-space: nowrap;
    overflow: hidden;
    display: inline-block;
  }

  @keyframes flotar {
    0% { transform: translateY(0) scale(1);}
    50% { transform: translateY(-100px) scale(1.2);}
    100% { transform: translateY(0) scale(1);}
  }

  /* --- Responsive para m√≥viles --- */
  @media (max-width: 768px) {
    body { font-size: 16px; }
    .pantalla { padding: 1rem; }
    h1 { font-size: 1.5rem; }
    h2 { font-size: 1.2rem; }
    button { font-size: 0.9rem; padding: 0.6rem 1rem; }
    .carrusel-seccion { width: 90%; max-width: none; }
    .slide img { width: 100%; height: auto; max-height: 400px; }
    #pantalla3 iframe { width: 90%; height: auto; }
    .overlay { max-width: 90%; padding: 1rem; }
  }
</style>
</head>
<body>

<!-- Pantalla 1 -->
<div class="pantalla activa" id="pantalla1">
  <h1 class="typewriter" data-text="¬°Hola, Mu√±equita!üíñ"></h1>
  <h2 class="typewriter" data-text="Cree esto para ti, s√© que te gustar√° y te har√° reir ü§£"></h2>
  <h4 class="typewriter" data-text="Te recomiendo que veas esto en un lugar sin ruido."></h4>
  <h2 class="typewriter" data-text="üëâüèΩüëàüèΩ"></h2>
  <button id="btnPantalla1" onclick="siguientePantalla(2)" style="display:inline-block;">Presiona aqu√≠üòè</button>
</div>

<!-- Pantalla 2 -->
<div class="pantalla" id="pantalla2">
  <audio id="backgroundAudio" loop>
    <source src="https://www.dropbox.com/scl/fi/zxpp9xm7n9zdrupnqct9k/Hechizo-Ana-Gabriel-Letra.mp3?rlkey=a32n53niec318g1d3a8d68bcs&st=uq789l3v&raw=1" type="audio/mpeg">
    Tu navegador no soporta audio.
  </audio>

  <!-- Ejemplo de secci√≥n de carrusel -->
  <section class="carrusel-seccion visible" data-seccion="1">
    <p>4 de Julio</p>
    <div class="carrusel">
      <div class="slide activa">
        <img src="imagen1.jpg" alt="Recuerdo 1">
      </div>
      <div class="slide">
        <img src="imagen2.jpg" alt="Recuerdo 2">
        <h1>Texto ejemplo</h1>
      </div>
      <div class="dots"></div>
    </div>
    <button class="siguiente-carrusel">üçª Nuestra primer salida üçª</button>
  </section>

  <!-- Bot√≥n final para ir a pantalla 3 -->
  <button onclick="siguientePantalla(3)">Ver mensaje final üíå</button>
</div>

<!-- Pantalla 3 -->
<div class="pantalla" id="pantalla3">
  <video autoplay muted loop class="background-video">
    <source src="https://www.dropbox.com/scl/fi/erv0pjgvoc4ma04ol7d8a/vfinal.mov?rlkey=zjl3bjk65z2n0gl7vw831jyx2&st=o7c38krh&raw=1" type="video/mp4">
    Tu navegador no soporta videos en HTML5.
  </video>
  <div class="contenido-video">
    <p id="message" class="mensaje-final"></p>
    <button id="readButton" onclick="finishMessage()" style="display:none;">Ya le√≠</button>
  </div>
</div>

<!-- Pantalla 4 -->
<div class="pantalla" id="pantalla4">
  <h1>üíï Besitossss! üíï</h1>
</div>

<script>
function escribirEfecto(element, texto, velocidad = 60) {
  return new Promise(resolve => {
    let i = 0;
    function escribir() {
      if (i < texto.length) {
        element.textContent += texto.charAt(i);
        i++;
        setTimeout(escribir, velocidad);
      } else {
        element.style.borderRight = "none";
        resolve();
      }
    }
    escribir();
  });
}

async function escribirEnOrden() {
  const elementos = document.querySelectorAll(".typewriter");
  for (let el of elementos) {
    const texto = el.getAttribute("data-text");
    await escribirEfecto(el, texto);
  }
  document.getElementById("btnPantalla1").style.display = "inline-block";
}

document.addEventListener("DOMContentLoaded", escribirEnOrden);

function siguientePantalla(num) {
  const audio = document.getElementById("backgroundAudio");
  audio.play().catch(() => console.log("Usuario debe interactuar para reproducir audio en iOS"));

  document.querySelectorAll('.pantalla').forEach(p => p.classList.remove('activa'));
  document.getElementById('pantalla' + num).classList.add('activa');

  if(num === 3){ iniciarTexto(); }
}

// Carrusel
document.querySelectorAll(".carrusel-seccion").forEach(seccion => {
  const slides = seccion.querySelectorAll(".slide");
  let current = 0;
  const dotsContainer = seccion.querySelector(".dots");

  slides.forEach((s, i) => {
    const dot = document.createElement("div");
    dot.classList.add("dot");
    if(i === 0) dot.classList.add("activa");
    dot.addEventListener("click", (e) => {
      e.stopPropagation();
      slides[current].classList.remove("activa");
      current = i;
      slides[current].classList.add("activa");
      actualizarDots();
    });
    dotsContainer.appendChild(dot);
  });

  function actualizarDots() {
    const dots = dotsContainer.querySelectorAll(".dot");
    dots.forEach(d => d.classList.remove("activa"));
    dots[current].classList.add("activa");
  }

  seccion.addEventListener("click", () => {
    slides[current].classList.remove("activa");
    current = (current + 1) % slides.length;
    slides[current].classList.add("activa");
    actualizarDots();
  });

  const btn = seccion.querySelector(".siguiente-carrusel");
  if(btn){
    btn.addEventListener("click", (e) => {
      e.stopPropagation();
      const nextSeccion = seccion.nextElementSibling;
      if(nextSeccion){
        nextSeccion.classList.add("visible");
        nextSeccion.scrollIntoView({behavior: "smooth"});
      }
    });
  }
});

function iniciarTexto(){
  const messageText = `En definitiva, has logrado despertar en m√≠ sentimientos... (tu mensaje completo aqu√≠)`;
  const messageEl = document.getElementById("message");
  messageEl.textContent = "";
  let i = 0;

  function typeMessage() {
    if (i < messageText.length) {
      messageEl.textContent += messageText.charAt(i);
      i++;
      let delay = 40;
      if (",üíµ".includes(messageText.charAt(i-1))) delay = 250;
      if (".‚ú®üòç".includes(messageText.charAt(i-1))) delay = 400;
      setTimeout(typeMessage, delay);
    } else {
      document.getElementById("readButton").style.display = "inline-block";
    }
  }

  setTimeout(typeMessage, 500);
}

function finishMessage() {
  document.getElementById("pantalla3").classList.remove("activa");
  document.getElementById("pantalla4").classList.add("activa"); 
}
</script>

</body>
</html>
